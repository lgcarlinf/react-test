import{r as S,a as ge}from"./react-suS_9M4D.js";var qt={exports:{}},Rt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ye=S,_e=Symbol.for("react.element"),Se=Symbol.for("react.fragment"),Pe=Object.prototype.hasOwnProperty,be=ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Re={key:!0,ref:!0,__self:!0,__source:!0};function Gt(t,n,e){var o,s={},i=null,r=null;e!==void 0&&(i=""+e),n.key!==void 0&&(i=""+n.key),n.ref!==void 0&&(r=n.ref);for(o in n)Pe.call(n,o)&&!Re.hasOwnProperty(o)&&(s[o]=n[o]);if(t&&t.defaultProps)for(o in n=t.defaultProps,n)s[o]===void 0&&(s[o]=n[o]);return{$$typeof:_e,type:t,key:i,ref:r,props:s,_owner:be.current}}Rt.Fragment=Se;Rt.jsx=Gt;Rt.jsxs=Gt;qt.exports=Rt;var g=qt.exports;const $t="pushstate",Bt="popstate",Jt="beforeunload",Xt=t=>(t.preventDefault(),t.returnValue=""),Le=()=>{removeEventListener(Jt,Xt,{capture:!0})};function Yt(t){let n=t.getLocation();const e=new Set;let o=[];const s=()=>{n=t.getLocation(),e.forEach(r=>r())},i=async(r,a)=>{var l;if(!((a==null?void 0:a.ignoreBlocker)??!1)&&typeof document<"u"&&o.length){for(const d of o)if(!await d()){(l=t.onBlocked)==null||l.call(t,s);return}}r()};return{get location(){return n},get length(){return t.getLength()},subscribers:e,subscribe:r=>(e.add(r),()=>{e.delete(r)}),push:(r,a,l)=>{a=Dt(a),i(()=>{t.pushState(r,a),s()},l)},replace:(r,a,l)=>{a=Dt(a),i(()=>{t.replaceState(r,a),s()},l)},go:(r,a)=>{i(()=>{t.go(r),s()},a)},back:r=>{i(()=>{t.back(),s()},r)},forward:r=>{i(()=>{t.forward(),s()},r)},createHref:r=>t.createHref(r),block:r=>(o.push(r),o.length===1&&addEventListener(Jt,Xt,{capture:!0}),()=>{o=o.filter(a=>a!==r),o.length||Le()}),flush:()=>{var r;return(r=t.flush)==null?void 0:r.call(t)},destroy:()=>{var r;return(r=t.destroy)==null?void 0:r.call(t)},notify:s}}function Dt(t){return t||(t={}),{...t,key:Ce()}}function xe(t){const n=typeof document<"u"?window:void 0,e=n.history.pushState,o=n.history.replaceState,s=v=>v,i=()=>St(`${n.location.pathname}${n.location.search}${n.location.hash}`,n.history.state);let r=i(),a;const l=()=>r;let c,d;const u=()=>{c&&(m._ignoreSubscribers=!0,(c.isPush?n.history.pushState:n.history.replaceState)(c.state,"",c.href),m._ignoreSubscribers=!1,c=void 0,d=void 0,a=void 0)},h=(v,f,b)=>{const C=s(f);d||(a=r),r=St(f,b),c={href:C,state:b,isPush:(c==null?void 0:c.isPush)||v==="push"},d||(d=Promise.resolve().then(()=>u()))},p=()=>{r=i(),m.notify()},m=Yt({getLocation:l,getLength:()=>n.history.length,pushState:(v,f)=>h("push",v,f),replaceState:(v,f)=>h("replace",v,f),back:()=>n.history.back(),forward:()=>n.history.forward(),go:v=>n.history.go(v),createHref:v=>s(v),flush:u,destroy:()=>{n.history.pushState=e,n.history.replaceState=o,n.removeEventListener($t,p),n.removeEventListener(Bt,p)},onBlocked:v=>{a&&r!==a&&(r=a,v())}});return n.addEventListener($t,p),n.addEventListener(Bt,p),n.history.pushState=function(...v){const f=e.apply(n.history,v);return m._ignoreSubscribers||p(),f},n.history.replaceState=function(...v){const f=o.apply(n.history,v);return m._ignoreSubscribers||p(),f},m}function we(t={initialEntries:["/"]}){const n=t.initialEntries;let e=t.initialIndex??n.length-1;const o=n.map(()=>({}));return Yt({getLocation:()=>St(n[e],o[e]),getLength:()=>n.length,pushState:(i,r)=>{e<n.length-1&&(n.splice(e+1),o.splice(e+1)),o.push(r),n.push(i),e=Math.max(n.length-1,0)},replaceState:(i,r)=>{o[e]=r,n[e]=i},back:()=>{e=Math.max(e-1,0)},forward:()=>{e=Math.min(e+1,n.length-1)},go:i=>{e=Math.min(Math.max(e+i,0),n.length-1)},createHref:i=>i})}function St(t,n){const e=t.indexOf("#"),o=t.indexOf("?");return{href:t,pathname:t.substring(0,e>0?o>0?Math.min(e,o):e:o>0?o:t.length),hash:e>-1?t.substring(e):"",search:o>-1?t.slice(o,e===-1?void 0:e):"",state:n||{}}}function Ce(){return(Math.random()+1).toString(36).substring(7)}var Me="Invariant failed";function V(t,n){if(!t)throw new Error(Me)}const It=S.createContext(null);function Qt(){return typeof document>"u"?It:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=It,It)}function et(t){const n=S.useContext(Qt());return t==null||t.warn,n}var Zt={exports:{}},te={},ee={exports:{}},oe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ut=S;function Ee(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Ie=typeof Object.is=="function"?Object.is:Ee,Fe=ut.useState,Te=ut.useEffect,je=ut.useLayoutEffect,ke=ut.useDebugValue;function Oe(t,n){var e=n(),o=Fe({inst:{value:e,getSnapshot:n}}),s=o[0].inst,i=o[1];return je(function(){s.value=e,s.getSnapshot=n,Ft(s)&&i({inst:s})},[t,e,n]),Te(function(){return Ft(s)&&i({inst:s}),t(function(){Ft(s)&&i({inst:s})})},[t]),ke(e),e}function Ft(t){var n=t.getSnapshot;t=t.value;try{var e=n();return!Ie(t,e)}catch{return!0}}function $e(t,n){return n()}var Be=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$e:Oe;oe.useSyncExternalStore=ut.useSyncExternalStore!==void 0?ut.useSyncExternalStore:Be;ee.exports=oe;var De=ee.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lt=S,Ae=De;function Ne(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var ze=typeof Object.is=="function"?Object.is:Ne,Ke=Ae.useSyncExternalStore,Ve=Lt.useRef,Ue=Lt.useEffect,He=Lt.useMemo,We=Lt.useDebugValue;te.useSyncExternalStoreWithSelector=function(t,n,e,o,s){var i=Ve(null);if(i.current===null){var r={hasValue:!1,value:null};i.current=r}else r=i.current;i=He(function(){function l(p){if(!c){if(c=!0,d=p,p=o(p),s!==void 0&&r.hasValue){var m=r.value;if(s(m,p))return u=m}return u=p}if(m=u,ze(d,p))return m;var v=o(p);return s!==void 0&&s(m,v)?m:(d=p,u=v)}var c=!1,d,u,h=e===void 0?null:e;return[function(){return l(n())},h===null?void 0:function(){return l(h())}]},[n,e,o,s]);var a=Ke(t,i[0],i[1]);return Ue(function(){r.hasValue=!0,r.value=a},[a]),We(a),a};Zt.exports=te;var qe=Zt.exports;class Ge{constructor(n,e){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=o=>{var s,i;this.listeners.add(o);const r=(i=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:i.call(s,o,this);return()=>{this.listeners.delete(o),r==null||r()}},this.setState=o=>{var s,i,r;const a=this.state;this.state=(s=this.options)!=null&&s.updateFn?this.options.updateFn(a)(o):o(a),(r=(i=this.options)==null?void 0:i.onUpdate)==null||r.call(i),this._flush()},this._flush=()=>{if(this._batching)return;const o=++this._flushing;this.listeners.forEach(s=>{this._flushing===o&&s()})},this.batch=o=>{if(this._batching)return o();this._batching=!0,o(),this._batching=!1,this._flush()},this.state=n,this.options=e}}function Je(t,n=e=>e){return qe.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,n,Xe)}function Xe(t,n){if(Object.is(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;const e=Object.keys(t);if(e.length!==Object.keys(n).length)return!1;for(let o=0;o<e.length;o++)if(!Object.prototype.hasOwnProperty.call(n,e[o])||!Object.is(t[e[o]],n[e[o]]))return!1;return!0}const q="__root__";function Ye(t,n){let e,o,s,i="";for(e in t)if((s=t[e])!==void 0)if(Array.isArray(s))for(o=0;o<s.length;o++)i&&(i+="&"),i+=encodeURIComponent(e)+"="+encodeURIComponent(s[o]);else i&&(i+="&"),i+=encodeURIComponent(e)+"="+encodeURIComponent(s);return""+i}function At(t){if(!t)return"";const n=decodeURIComponent(t);return n==="false"?!1:n==="true"?!0:+n*0===0&&+n+""===n?+n:n}function Qe(t,n){let e,o;const s={},i=t.split("&");for(;e=i.shift();){const r=e.indexOf("=");if(r!==-1){o=e.slice(0,r),o=decodeURIComponent(o);const a=e.slice(r+1);s[o]!==void 0?s[o]=[].concat(s[o],At(a)):s[o]=At(a)}else o=e,o=decodeURIComponent(o),s[o]=""}return s}const Ze=eo(JSON.parse),to=oo(JSON.stringify,JSON.parse);function eo(t){return n=>{n.substring(0,1)==="?"&&(n=n.substring(1));const e=Qe(n);for(const o in e){const s=e[o];if(typeof s=="string")try{e[o]=t(s)}catch{}}return e}}function oo(t,n){function e(o){if(typeof o=="object"&&o!==null)try{return t(o)}catch{}else if(typeof o=="string"&&typeof n=="function")try{return n(o),t(o)}catch{}return o}return o=>{o={...o},Object.keys(o).forEach(i=>{const r=o[i];typeof r>"u"||r===void 0?delete o[i]:o[i]=e(r)});const s=Ye(o).toString();return s?`?${s}`:""}}function ft(t){return t[t.length-1]}function no(t){return typeof t=="function"}function ct(t,n){return no(t)?t(n):t}function pt(t,n){return n.reduce((e,o)=>(e[o]=t[o],e),{})}function it(t,n){if(t===n)return t;const e=n,o=zt(t)&&zt(e);if(o||dt(t)&&dt(e)){const s=o?t:Object.keys(t),i=s.length,r=o?e:Object.keys(e),a=r.length,l=o?[]:{};let c=0;for(let d=0;d<a;d++){const u=o?d:r[d];(!o&&s.includes(u)||o)&&t[u]===void 0&&e[u]===void 0?(l[u]=void 0,c++):(l[u]=it(t[u],e[u]),l[u]===t[u]&&t[u]!==void 0&&c++)}return i===a&&c===i?t:l}return e}function dt(t){if(!Nt(t))return!1;const n=t.constructor;if(typeof n>"u")return!0;const e=n.prototype;return!(!Nt(e)||!e.hasOwnProperty("isPrototypeOf"))}function Nt(t){return Object.prototype.toString.call(t)==="[object Object]"}function zt(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function lt(t,n,e=!1){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(dt(t)&&dt(n)){const o=Object.keys(t).filter(i=>t[i]!==void 0),s=Object.keys(n).filter(i=>n[i]!==void 0);return!e&&o.length!==s.length?!1:!s.some(i=>!(i in t)||!lt(t[i],n[i],e))}return Array.isArray(t)&&Array.isArray(n)?t.length!==n.length?!1:!t.some((o,s)=>!lt(o,n[s],e)):!1}const Tt=typeof window<"u"?S.useLayoutEffect:S.useEffect;function at(t){let n,e;const o=new Promise((s,i)=>{n=s,e=i});return o.status="pending",o.resolve=s=>{o.status="resolved",o.value=s,n(s),t==null||t(s)},o.reject=s=>{o.status="rejected",e(s)},o}function Kt(t){const n=S.useRef({value:t,prev:null}),e=n.current.value;return t!==e&&(n.current={value:t,prev:e}),n.current.prev}function ro(t,n,e={},o={}){const s=S.useRef(typeof IntersectionObserver=="function"),i=S.useRef(null);return S.useEffect(()=>{if(!(!t.current||!s.current||o.disabled))return i.current=new IntersectionObserver(([r])=>{n(r)},e),i.current.observe(t.current),()=>{var r;(r=i.current)==null||r.disconnect()}},[n,e,o.disabled,t]),i.current}function so(t){const n=S.useRef(null);return S.useEffect(()=>{t&&(typeof t=="function"?t(n.current):t.current=n.current)}),n}function Z(t){return xt(t.filter(n=>n!==void 0).join("/"))}function xt(t){return t.replace(/\/{2,}/g,"/")}function kt(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function rt(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function io(t){return rt(kt(t))}function Pt(t,n){return t.endsWith("/")&&t!=="/"&&t!==`${n}/`?t.slice(0,-1):t}function ao(t,n,e){return Pt(t,e)===Pt(n,e)}function co({basepath:t,base:n,to:e,trailingSlash:o="never"}){var s,i;n=bt(t,n),e=bt(t,e);let r=ht(n);const a=ht(e);r.length>1&&((s=ft(r))==null?void 0:s.value)==="/"&&r.pop(),a.forEach((c,d)=>{c.value==="/"?d?d===a.length-1&&r.push(c):r=[c]:c.value===".."?r.pop():c.value==="."||r.push(c)}),r.length>1&&(((i=ft(r))==null?void 0:i.value)==="/"?o==="never"&&r.pop():o==="always"&&r.push({type:"pathname",value:"/"}));const l=Z([t,...r.map(c=>c.value)]);return xt(l)}function ht(t){if(!t)return[];t=xt(t);const n=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),n.push({type:"pathname",value:"/"})),!t)return n;const e=t.split("/").filter(Boolean);return n.push(...e.map(o=>o==="$"||o==="*"?{type:"wildcard",value:o}:o.charAt(0)==="$"?{type:"param",value:o}:{type:"pathname",value:decodeURI(o)})),t.slice(-1)==="/"&&(t=t.substring(1),n.push({type:"pathname",value:"/"})),n}function jt({path:t,params:n,leaveWildcards:e,leaveParams:o}){const s=ht(t),i={};for(const[r,a]of Object.entries(n)){const l=typeof a=="string";["*","_splat"].includes(r)?i[r]=l?encodeURI(a):a:i[r]=l?encodeURIComponent(a):a}return Z(s.map(r=>{if(r.type==="wildcard"){const a=i._splat;return e?`${r.value}${a??""}`:a}if(r.type==="param"){if(o){const a=i[r.value];return`${r.value}${a??""}`}return i[r.value.substring(1)]??"undefined"}return r.value}))}function yt(t,n,e){const o=lo(t,n,e);if(!(e.to&&!o))return o??{}}function bt(t,n){switch(!0){case t==="/":return n;case n===t:return"";case n.length<t.length:return n;case n[t.length]!=="/":return n;case n.startsWith(t):return n.slice(t.length);default:return n}}function lo(t,n,e){n=bt(t,n);const o=bt(t,`${e.to??"$"}`),s=ht(n),i=ht(o);n.startsWith("/")||s.unshift({type:"pathname",value:"/"}),o.startsWith("/")||i.unshift({type:"pathname",value:"/"});const r={};return(()=>{for(let l=0;l<Math.max(s.length,i.length);l++){const c=s[l],d=i[l],u=l>=s.length-1,h=l>=i.length-1;if(d){if(d.type==="wildcard"){const p=decodeURI(Z(s.slice(l).map(m=>m.value)));return r["*"]=p,r._splat=p,!0}if(d.type==="pathname"){if(d.value==="/"&&!(c!=null&&c.value))return!0;if(c){if(e.caseSensitive){if(d.value!==c.value)return!1}else if(d.value.toLowerCase()!==c.value.toLowerCase())return!1}}if(!c)return!1;if(d.type==="param"){if(c.value==="/")return!1;c.value.charAt(0)!=="$"&&(r[d.value.substring(1)]=decodeURIComponent(c.value))}}if(!u&&h)return r["**"]=Z(s.slice(l+1).map(p=>p.value)),!!e.fuzzy&&(d==null?void 0:d.value)!=="/"}return!0})()?r:void 0}function nt(t){return!!(t!=null&&t.isRedirect)}function Vt(t){return!!(t!=null&&t.isRedirect)&&t.href}function Ot(t){const n=t.errorComponent??wt;return g.jsx(uo,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:e,reset:o})=>e?S.createElement(n,{error:e,reset:o}):t.children})}class uo extends S.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(n){return{resetKey:n.getResetKey()}}static getDerivedStateFromError(n){return{error:n}}reset(){this.setState({error:null})}componentDidUpdate(n,e){e.error&&e.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(n,e){this.props.onCatch&&this.props.onCatch(n,e)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function wt({error:t}){const[n,e]=S.useState(!1);return g.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[g.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),g.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>e(o=>!o),children:n?"Hide Error":"Show Error"})]}),g.jsx("div",{style:{height:".25rem"}}),n?g.jsx("div",{children:g.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?g.jsx("code",{children:t.message}):null})}):null]})}function U(t){const n=et({warn:(t==null?void 0:t.router)===void 0});return Je(((t==null?void 0:t.router)||n).__store,t==null?void 0:t.select)}function Y(t){return!!(t!=null&&t.isNotFound)}function ho(t){const n=U({select:e=>`not-found-${e.location.pathname}-${e.status}`});return g.jsx(Ot,{getResetKey:()=>n,onCatch:(e,o)=>{var s;if(Y(e))(s=t.onCatch)==null||s.call(t,e,o);else throw e},errorComponent:({error:e})=>{var o;return(o=t.fallback)==null?void 0:o.call(t,e)},children:t.children})}function fo(){return g.jsx("p",{children:"Not Found"})}const po={stringify:t=>JSON.stringify(t,function(e,o){const s=this[e],i=Ut.find(r=>r.stringifyCondition(s));return i?i.stringify(s):o}),parse:t=>JSON.parse(t,function(e,o){const s=this[e],i=Ut.find(r=>r.parseCondition(s));return i?i.parse(s):o})},Ut=[{stringifyCondition:t=>t instanceof Date,stringify:t=>({$date:t.toISOString()}),parseCondition:t=>dt(t)&&t.$date,parse:t=>new Date(t.$date)},{stringifyCondition:t=>t===void 0,stringify:()=>({$undefined:""}),parseCondition:t=>dt(t)&&t.$undefined==="",parse:()=>{}}],ne=["component","errorComponent","pendingComponent","notFoundComponent"];function mo(t){var n;for(const e of ne)if((n=t.options[e])!=null&&n.preload)return!0;return!1}function Bo(t){return new vo(t)}class vo{constructor(n){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.subscribers=new Set,this.startReactTransition=e=>e(),this.update=e=>{e.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const o=this.options;this.options={...this.options,...e},this.isServer=this.options.isServer??typeof document>"u",(!this.basepath||e.basepath&&e.basepath!==o.basepath)&&(e.basepath===void 0||e.basepath===""||e.basepath==="/"?this.basepath="/":this.basepath=`/${io(e.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?we({initialEntries:[this.basepath||"/"]}):xe()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new Ge(_o(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}}))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const e=this.options.notFoundRoute;e&&(e.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[e.id]=e);const o=r=>{r.forEach((a,l)=>{a.init({originalIndex:l,defaultSsr:this.options.defaultSsr});const c=this.routesById[a.id];if(V(!c,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const u=rt(a.fullPath);(!this.routesByPath[u]||a.fullPath.endsWith("/"))&&(this.routesByPath[u]=a)}const d=a.children;d!=null&&d.length&&o(d)})};o([this.routeTree]);const s=[];Object.values(this.routesById).forEach((r,a)=>{var l;if(r.isRoot||!r.path)return;const c=kt(r.fullPath),d=ht(c);for(;d.length>1&&((l=d[0])==null?void 0:l.value)==="/";)d.shift();const u=d.map(h=>h.value==="/"?.75:h.type==="param"?.5:h.type==="wildcard"?.25:1);s.push({child:r,trimmed:c,parsed:d,index:a,scores:u})}),this.flatRoutes=s.sort((r,a)=>{const l=Math.min(r.scores.length,a.scores.length);for(let c=0;c<l;c++)if(r.scores[c]!==a.scores[c])return a.scores[c]-r.scores[c];if(r.scores.length!==a.scores.length)return a.scores.length-r.scores.length;for(let c=0;c<l;c++)if(r.parsed[c].value!==a.parsed[c].value)return r.parsed[c].value>a.parsed[c].value?1:-1;return r.index-a.index}).map((r,a)=>(r.child.rank=a,r.child))},this.subscribe=(e,o)=>{const s={eventType:e,fn:o};return this.subscribers.add(s),()=>{this.subscribers.delete(s)}},this.emit=e=>{this.subscribers.forEach(o=>{o.eventType===e.type&&o.fn(e)})},this.parseLocation=e=>{const o=({pathname:a,search:l,hash:c,state:d})=>{const u=this.options.parseSearch(l),h=this.options.stringifySearch(u);return{pathname:a,searchStr:h,search:it(e==null?void 0:e.search,u),hash:c.split("#").reverse()[0]??"",href:`${a}${h}${c}`,state:it(e==null?void 0:e.state,d)}},s=o(this.history.location),{__tempLocation:i,__tempKey:r}=s.state;if(i&&(!r||r===this.tempLocationKey)){const a=o(i);return a.state.key=s.state.key,delete a.state.__tempLocation,{...a,maskedLocation:s}}return s},this.resolvePathWithBase=(e,o)=>co({basepath:this.basepath,base:e,to:xt(o),trailingSlash:this.options.trailingSlash}),this.cancelMatch=e=>{const o=this.getMatch(e);o&&(o.abortController.abort(),clearTimeout(o.pendingTimeout))},this.cancelMatches=()=>{var e;(e=this.state.pendingMatches)==null||e.forEach(o=>{this.cancelMatch(o.id)})},this.buildLocation=e=>{const o=(i={},r)=>{var a,l,c,d,u;const h=i._fromLocation?this.matchRoutes(i._fromLocation):this.state.matches,p=i.from!=null?h.find(x=>yt(this.basepath,rt(x.pathname),{to:i.from,caseSensitive:!1,fuzzy:!1})):void 0,m=(p==null?void 0:p.pathname)||this.latestLocation.pathname;V(i.from==null||p!=null,"Could not find match for from: "+i.from);const v=(a=this.state.pendingMatches)!=null&&a.length?(l=ft(this.state.pendingMatches))==null?void 0:l.search:((c=ft(h))==null?void 0:c.search)||this.latestLocation.search,f=r==null?void 0:r.filter(x=>h.find(k=>k.routeId===x.routeId)),b=this.routesById[(d=f==null?void 0:f.find(x=>x.pathname===m))==null?void 0:d.routeId];let C=i.to?this.resolvePathWithBase(m,`${i.to}`):this.resolvePathWithBase(m,(b==null?void 0:b.to)??m);const _={...(u=ft(h))==null?void 0:u.params};let L=(i.params??!0)===!0?_:{..._,...ct(i.params,_)};Object.keys(L).length>0&&(r==null||r.map(x=>{var k;const H=this.looseRoutesById[x.routeId];return((k=H==null?void 0:H.options.params)==null?void 0:k.stringify)??H.options.stringifyParams}).filter(Boolean).forEach(x=>{L={...L,...x(L)}})),C=jt({path:C,params:L??{},leaveWildcards:!1,leaveParams:e.leaveParams});const B=(f==null?void 0:f.map(x=>this.looseRoutesById[x.routeId].options.preSearchFilters??[]).flat().filter(Boolean))??[],T=(f==null?void 0:f.map(x=>this.looseRoutesById[x.routeId].options.postSearchFilters??[]).flat().filter(Boolean))??[],w=B.length?B.reduce((x,k)=>k(x),v):v,E=i.search===!0?w:i.search?ct(i.search,w):B.length?w:{},P=T.length?T.reduce((x,k)=>k(x),E):E,O=it(v,P),I=this.options.stringifySearch(O),F=i.hash===!0?this.latestLocation.hash:i.hash?ct(i.hash,this.latestLocation.hash):void 0,A=F?`#${F}`:"";let N=i.state===!0?this.latestLocation.state:i.state?ct(i.state,this.latestLocation.state):{};return N=it(this.latestLocation.state,N),{pathname:C,search:O,searchStr:I,state:N,hash:F??"",href:`${C}${I}${A}`,unmaskOnReload:i.unmaskOnReload}},s=(i={},r)=>{var a;const l=o(i);let c=r?o(r):void 0;if(!c){let m={};const v=(a=this.options.routeMasks)==null?void 0:a.find(f=>{const b=yt(this.basepath,l.pathname,{to:f.from,caseSensitive:!1,fuzzy:!1});return b?(m=b,!0):!1});if(v){const{from:f,...b}=v;r={...pt(e,["from"]),...b,params:m},c=o(r)}}const d=this.matchRoutes(l),u=c?this.matchRoutes(c):void 0,h=c?o(r,u):void 0,p=o(i,d);return h&&(p.maskedLocation=h),p};return e.mask?s(e,{...pt(e,["from"]),...e.mask}):s(e)},this.commitLocation=({viewTransition:e,ignoreBlocker:o,...s})=>{const i=()=>{s.state.key=this.latestLocation.state.key;const l=lt(s.state,this.latestLocation.state);return delete s.state.key,l},r=this.latestLocation.href===s.href,a=this.commitLocationPromise;if(this.commitLocationPromise=at(()=>{a==null||a.resolve()}),r&&i())this.load();else{let{maskedLocation:l,...c}=s;l&&(c={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...c,search:c.searchStr,state:{...c.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(c.unmaskOnReload??this.options.unmaskOnReload??!1)&&(c.state.__tempKey=this.tempLocationKey)),this.shouldViewTransition=e,this.history[s.replace?"replace":"push"](c.href,c.state,{ignoreBlocker:o})}return this.resetNextScroll=s.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:e,resetScroll:o,viewTransition:s,ignoreBlocker:i,...r}={})=>{const a=r.href;if(a){const c=St(a,{});r.to=c.pathname,r.search=this.options.parseSearch(c.search),r.hash=c.hash}const l=this.buildLocation(r);return this.commitLocation({...l,viewTransition:s,replace:e,resetScroll:o,ignoreBlocker:i})},this.navigate=({to:e,...o})=>{const s=String(e);let i;try{new URL(`${s}`),i=!0}catch{}return V(!i),this.buildAndCommitLocation({...o,to:e})},this.load=async()=>{this.latestLocation=this.parseLocation(this.latestLocation);let e,o,s;for(s=new Promise(i=>{this.startReactTransition(async()=>{var r;try{const a=this.latestLocation,l=this.state.resolvedLocation,c=l.href!==a.href;this.cancelMatches();let d;this.__store.batch(()=>{d=this.matchRoutes(a),this.__store.setState(u=>({...u,status:"pending",isLoading:!0,location:a,pendingMatches:d,cachedMatches:u.cachedMatches.filter(h=>!d.find(p=>p.id===h.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:l,toLocation:a,pathChanged:c}),this.emit({type:"onBeforeLoad",fromLocation:l,toLocation:a,pathChanged:c}),await this.loadMatches({matches:d,location:a,onReady:async()=>{this.startViewTransition(async()=>{let u,h,p;this.__store.batch(()=>{this.__store.setState(m=>{const v=m.matches,f=m.pendingMatches||m.matches;return u=v.filter(b=>!f.find(C=>C.id===b.id)),h=f.filter(b=>!v.find(C=>C.id===b.id)),p=v.filter(b=>f.find(C=>C.id===b.id)),{...m,isLoading:!1,loadedAt:Date.now(),matches:f,pendingMatches:void 0,cachedMatches:[...m.cachedMatches,...u.filter(b=>b.status!=="error")]}}),this.cleanCache()}),[[u,"onLeave"],[h,"onEnter"],[p,"onStay"]].forEach(([m,v])=>{m.forEach(f=>{var b,C;(C=(b=this.looseRoutesById[f.routeId].options)[v])==null||C.call(b,f)})})})}})}catch(a){Vt(a)?(e=a,this.isServer||this.navigate({...a,replace:!0,ignoreBlocker:!0})):Y(a)&&(o=a),this.__store.setState(l=>({...l,statusCode:e?e.statusCode:o?404:l.matches.some(c=>c.status==="error")?500:200,redirect:e}))}this.latestLoadPromise===s&&((r=this.commitLocationPromise)==null||r.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),i()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=e=>{const o=this.shouldViewTransition??this.options.defaultViewTransition;delete this.shouldViewTransition,o&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"?document.startViewTransition(e):e()},this.updateMatch=(e,o)=>{var s;let i;const r=(s=this.state.pendingMatches)==null?void 0:s.find(c=>c.id===e),a=this.state.matches.find(c=>c.id===e),l=r?"pendingMatches":a?"matches":"cachedMatches";return this.__store.setState(c=>{var d;return{...c,[l]:(d=c[l])==null?void 0:d.map(u=>u.id===e?i=o(u):u)}}),i},this.getMatch=e=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(o=>o.id===e),this.loadMatches=async({location:e,matches:o,preload:s,onReady:i,updateMatch:r=this.updateMatch})=>{let a,l=!1;const c=async()=>{l||(l=!0,await(i==null?void 0:i()))};!this.isServer&&!this.state.matches.length&&c();const d=(u,h)=>{var p,m,v;if(Vt(h))throw h;if(nt(h)||Y(h)){if(r(u.id,f=>({...f,status:nt(h)?"redirected":Y(h)?"notFound":"error",isFetching:!1,error:h,beforeLoadPromise:void 0,loaderPromise:void 0})),h.routeId||(h.routeId=u.routeId),(p=u.beforeLoadPromise)==null||p.resolve(),(m=u.loaderPromise)==null||m.resolve(),(v=u.loadPromise)==null||v.resolve(),nt(h))throw l=!0,h=this.resolveRedirect({...h,_fromLocation:e}),h;if(Y(h))throw this._handleNotFound(o,h,{updateMatch:r}),h}};try{await new Promise((u,h)=>{(async()=>{var p,m,v;try{const f=(_,L,B)=>{var T,w;const{id:E,routeId:P}=o[_],O=this.looseRoutesById[P];if(L instanceof Promise)throw L;L.routerCode=B,a=a??_,d(this.getMatch(E),L);try{(w=(T=O.options).onError)==null||w.call(T,L)}catch(I){L=I,d(this.getMatch(E),L)}r(E,I=>{var F;return(F=I.beforeLoadPromise)==null||F.resolve(),{...I,error:L,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[_,{id:L,routeId:B}]of o.entries()){const T=this.getMatch(L),w=(p=o[_-1])==null?void 0:p.id,E=this.looseRoutesById[B],P=E.options.pendingMs??this.options.defaultPendingMs,O=!!(i&&!this.isServer&&!s&&(E.options.loader||E.options.beforeLoad)&&typeof P=="number"&&P!==1/0&&(E.options.pendingComponent??this.options.defaultPendingComponent));if(T.beforeLoadPromise||T.loaderPromise)O&&setTimeout(()=>{try{c()}catch{}},P),await T.beforeLoadPromise;else{try{r(L,R=>({...R,loadPromise:at(()=>{var D;(D=R.loadPromise)==null||D.resolve()}),beforeLoadPromise:at()}));const I=new AbortController;let F;O&&(F=setTimeout(()=>{try{c()}catch{}},P));const{paramsError:A,searchError:N}=this.getMatch(L);A&&f(_,A,"PARSE_PARAMS"),N&&f(_,N,"VALIDATE_SEARCH");const x=()=>w?this.getMatch(w).context:this.options.context??{};r(L,R=>({...R,isFetching:"beforeLoad",fetchCount:R.fetchCount+1,abortController:I,pendingTimeout:F,context:{...x(),...R.__routeContext,...R.__beforeLoadContext}}));const{search:k,params:H,context:y,cause:Q}=this.getMatch(L),z={search:k,abortController:I,params:H,preload:!!s,context:y,location:e,navigate:R=>this.navigate({...R,_fromLocation:e}),buildLocation:this.buildLocation,cause:s?"preload":Q,matches:o};let j=await((v=(m=E.options).beforeLoad)==null?void 0:v.call(m,z))??{};this.serializeLoaderData&&(j=this.serializeLoaderData("__beforeLoadContext",j,{router:this,match:this.getMatch(L)})),(nt(j)||Y(j))&&f(_,j,"BEFORE_LOAD"),r(L,R=>({...R,__beforeLoadContext:j,context:{...x(),...R.__routeContext,...j},abortController:I}))}catch(I){f(_,I,"BEFORE_LOAD")}r(L,I=>{var F;return(F=I.beforeLoadPromise)==null||F.resolve(),{...I,beforeLoadPromise:void 0,isFetching:!1}})}}const b=o.slice(0,a),C=[];b.forEach(({id:_,routeId:L},B)=>{C.push((async()=>{const{loaderPromise:T}=this.getMatch(_);let w=!1;if(T)await T;else{const E=C[B-1],P=this.looseRoutesById[L],O=()=>{const{params:z,loaderDeps:j,abortController:R,context:D,cause:G}=this.getMatch(_);return{params:z,deps:j,preload:!!s,parentMatchPromise:E,abortController:R,context:D,location:e,navigate:ot=>this.navigate({...ot,_fromLocation:e}),cause:s?"preload":G,route:P}},I=Date.now()-this.getMatch(_).updatedAt,F=s?P.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:P.options.staleTime??this.options.defaultStaleTime??0,A=P.options.shouldReload,N=typeof A=="function"?A(O()):A;r(_,z=>({...z,loaderPromise:at(),preload:!!s&&!this.state.matches.find(j=>j.id===_)}));const x=async()=>{var z,j,R,D,G,ot,mt,vt;try{const st=async()=>{const K=this.getMatch(_);K.minPendingPromise&&await K.minPendingPromise};try{P._lazyPromise=P._lazyPromise||(P.lazyFn?P.lazyFn().then(X=>{Object.assign(P.options,X.options)}):Promise.resolve());const K=this.getMatch(_).componentsPromise||P._lazyPromise.then(()=>Promise.all(ne.map(async X=>{const M=P.options[X];M!=null&&M.preload&&await M.preload()})));r(_,X=>({...X,isFetching:"loader",componentsPromise:K}));let W=await((j=(z=P.options).loader)==null?void 0:j.call(z,O()));this.serializeLoaderData&&(W=this.serializeLoaderData("loaderData",W,{router:this,match:this.getMatch(_)})),d(this.getMatch(_),W),await P._lazyPromise,await st();const J=(D=(R=P.options).meta)==null?void 0:D.call(R,{matches:o,match:this.getMatch(_),params:this.getMatch(_).params,loaderData:W}),gt=(ot=(G=P.options).headers)==null?void 0:ot.call(G,{loaderData:W});r(_,X=>({...X,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:W,meta:J,headers:gt}))}catch(K){let W=K;await st(),d(this.getMatch(_),K);try{(vt=(mt=P.options).onError)==null||vt.call(mt,K)}catch(J){W=J,d(this.getMatch(_),J)}r(_,J=>({...J,error:W,status:"error",isFetching:!1}))}await this.getMatch(_).componentsPromise}catch(st){d(this.getMatch(_),st)}},{status:k,invalid:H}=this.getMatch(_);w=k==="success"&&(H||(N??I>F)),s&&P.options.preload===!1||(w?(async()=>{try{await x()}catch{}})():k!=="success"&&await x());const{loaderPromise:y,loadPromise:Q}=this.getMatch(_);y==null||y.resolve(),Q==null||Q.resolve()}r(_,E=>({...E,isFetching:w?E.isFetching:!1,loaderPromise:void 0,invalid:!1}))})())}),await Promise.all(C),u()}catch(f){h(f)}})()}),await c()}catch(u){if(nt(u)||Y(u))throw Y(u)&&!s&&await c(),u}return o},this.invalidate=()=>{const e=o=>({...o,invalid:!0,...o.status==="error"?{status:"pending",error:void 0}:{}});return this.__store.setState(o=>{var s;return{...o,matches:o.matches.map(e),cachedMatches:o.cachedMatches.map(e),pendingMatches:(s=o.pendingMatches)==null?void 0:s.map(e)}}),this.load()},this.resolveRedirect=e=>{const o=e;return o.href||(o.href=this.buildLocation(o).href),o},this.cleanCache=()=>{this.__store.setState(e=>({...e,cachedMatches:e.cachedMatches.filter(o=>{const s=this.looseRoutesById[o.routeId];if(!s.options.loader)return!1;const i=(o.preload?s.options.preloadGcTime??this.options.defaultPreloadGcTime:s.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return o.status!=="error"&&Date.now()-o.updatedAt<i})}))},this.preloadRoute=async e=>{const o=this.buildLocation(e);let s=this.matchRoutes(o,{throwOnError:!0,preload:!0});const i=Object.fromEntries([...this.state.matches,...this.state.pendingMatches??[],...this.state.cachedMatches].map(a=>[a.id,!0]));this.__store.batch(()=>{s.forEach(a=>{i[a.id]||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,a]}))})});const r=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id));try{return s=await this.loadMatches({matches:s,location:o,preload:!0,updateMatch:(a,l)=>{r.has(a)?s=s.map(c=>c.id===a?l(c):c):this.updateMatch(a,l)}}),s}catch(a){if(nt(a))return await this.preloadRoute({...a,_fromLocation:o});console.error(a);return}},this.matchRoute=(e,o)=>{const s={...e,to:e.to?this.resolvePathWithBase(e.from||"",e.to):void 0,params:e.params||{},leaveParams:!0},i=this.buildLocation(s);if(o!=null&&o.pending&&this.state.status!=="pending")return!1;const a=((o==null?void 0:o.pending)===void 0?!this.state.isLoading:o.pending)?this.latestLocation:this.state.resolvedLocation,l=yt(this.basepath,a.pathname,{...o,to:i.pathname});return!l||e.params&&!lt(l,e.params,!0)?!1:l&&((o==null?void 0:o.includeSearch)??!0)?lt(a.search,i.search,!0)?l:!1:l},this.dehydrate=()=>{var e;const o=((e=this.options.errorSerializer)==null?void 0:e.serialize)??So;return{state:{dehydratedMatches:this.state.matches.map(s=>({...pt(s,["id","status","updatedAt"]),error:s.error?{data:o(s.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var e,o,s;let i;typeof document<"u"&&(i=this.options.transformer.parse((e=window.__TSR__)==null?void 0:e.dehydrated)),V(i),this.dehydratedData=i.payload,(s=(o=this.options).hydrate)==null||s.call(o,i.payload);const r=i.router.state,a=this.matchRoutes(this.state.location).map(l=>{const c=r.dehydratedMatches.find(d=>d.id===l.id);return V(c,`Could not find a client-side match for dehydrated match with id: ${l.id}!`),{...l,...c}});this.__store.setState(l=>({...l,matches:a})),this.manifest=i.router.manifest},this.injectedHtml=[],this.injectHtml=e=>{const o=()=>(this.injectedHtml=this.injectedHtml.filter(s=>s!==o),e);this.injectedHtml.push(o)},this.streamedKeys=new Set,this.getStreamedValue=e=>{var o;if(this.isServer)return;const s=(o=window.__TSR__)==null?void 0:o.streamedValues[e];if(s)return s.parsed||(s.parsed=this.options.transformer.parse(s.value)),s.parsed},this.streamValue=(e,o)=>{var s;this.streamedKeys.has(e),this.streamedKeys.add(e);const i=`__TSR__.streamedValues['${e}'] = { value: ${(s=this.serializer)==null?void 0:s.call(this,this.options.transformer.stringify(o))}}`;this.injectHtml(`<script class='tsr-once'>${i}; __TSR__.cleanScripts()<\/script>`)},this._handleNotFound=(e,o,{updateMatch:s=this.updateMatch}={})=>{const i=Object.fromEntries(e.map(l=>[l.routeId,l]));let r=(o.global?this.looseRoutesById[q]:this.looseRoutesById[o.routeId])||this.looseRoutesById[q];for(;!r.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&r.id!==q;)r=r.parentRoute,V(r);const a=i[r.id];V(a,"Could not find match for route: "+r.id),s(a.id,l=>({...l,status:"notFound",error:o,isFetching:!1})),o.routerCode==="BEFORE_LOAD"&&r.parentRoute&&(o.routeId=r.parentRoute.id,this._handleNotFound(e,o,{updateMatch:s}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(e=>e.status==="notFound"||e.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...n,notFoundMode:n.notFoundMode??"fuzzy",stringifySearch:n.stringifySearch??to,parseSearch:n.parseSearch??Ze,transformer:n.transformer??po}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(n,e,o){return typeof n=="string"?this.matchRoutesInternal({pathname:n,search:e},o):this.matchRoutesInternal(n,e)}matchRoutesInternal(n,e){let o={};const s=this.flatRoutes.find(u=>{const h=yt(this.basepath,rt(n.pathname),{to:u.fullPath,caseSensitive:u.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});return h?(o=h,!0):!1});let i=s||this.routesById[q];const r=[i];let a=!1;for((s?s.path!=="/"&&o["**"]:rt(n.pathname))&&(this.options.notFoundRoute?r.push(this.options.notFoundRoute):a=!0);i.parentRoute;)i=i.parentRoute,r.unshift(i);const l=(()=>{if(a){if(this.options.notFoundMode!=="root")for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.children)return h.id}return q}})(),c=r.map(u=>{var h;let p;const m=((h=u.options.params)==null?void 0:h.parse)??u.options.parseParams;if(m)try{const v=m(o);Object.assign(o,v)}catch(v){if(p=new yo(v.message,{cause:v}),e!=null&&e.throwOnError)throw p;return p}}),d=[];return r.forEach((u,h)=>{var p,m,v,f,b,C,_,L,B,T,w,E;const P=d[h-1],[O,I]=(()=>{const R=(P==null?void 0:P.search)??n.search;try{const D=typeof u.options.validateSearch=="object"?u.options.validateSearch.parse:u.options.validateSearch,G=(D==null?void 0:D(R))??{};return[{...R,...G},void 0]}catch(D){const G=new go(D.message,{cause:D});if(e!=null&&e.throwOnError)throw G;return[R,G]}})(),F=((m=(p=u.options).loaderDeps)==null?void 0:m.call(p,{search:O}))??"",A=F?JSON.stringify(F):"",N=jt({path:u.fullPath,params:o}),x=jt({path:u.id,params:o,leaveWildcards:!0})+A,k=this.getMatch(x),H=this.state.matches.find(R=>R.id===x)?"stay":"enter";let y;if(k)y={...k,cause:H,params:o};else{const R=u.options.loader||u.options.beforeLoad||u.lazyFn||mo(u)?"pending":"success";y={id:x,index:h,routeId:u.id,params:o,pathname:Z([this.basepath,N]),updatedAt:Date.now(),search:{},searchError:void 0,status:R,isFetching:!1,error:void 0,paramsError:c[h],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:H,loaderDeps:F,invalid:!1,preload:!1,links:(f=(v=u.options).links)==null?void 0:f.call(v),scripts:(C=(b=u.options).scripts)==null?void 0:C.call(b),staticData:u.options.staticData||{},loadPromise:at(),fullPath:u.fullPath}}y.status==="success"&&(y.meta=(L=(_=u.options).meta)==null?void 0:L.call(_,{matches:d,match:y,params:y.params,loaderData:y.loaderData}),y.headers=(T=(B=u.options).headers)==null?void 0:T.call(B,{loaderData:y.loaderData})),e!=null&&e.preload||(y.globalNotFound=l===u.id),y.search=it(y.search,O),y.searchError=I;const z=(P==null?void 0:P.id)?P.context??this.options.context??{}:this.options.context??{};y.context={...z,...y.__routeContext,...y.__beforeLoadContext};const j={search:y.search,params:y.params,context:y.context,location:n,navigate:R=>this.navigate({...R,_fromLocation:n}),buildLocation:this.buildLocation,cause:y.cause,abortController:y.abortController,preload:!!y.preload,matches:d};y.__routeContext=((E=(w=u.options).context)==null?void 0:E.call(w,j))??{},y.context={...z,...y.__routeContext,...y.__beforeLoadContext},d.push(y)}),d}}class go extends Error{}class yo extends Error{}function _o(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function So(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function Ht(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function Wt(t){if("name"in t&&"message"in t){const n=new Error(t.message);return n.name=t.name,n}return t.data}const Ct=S.createContext(void 0);function tt(t){const n=S.useContext(Ct);return U({select:o=>{const s=o.matches.find(i=>t.from?t.from===i.routeId:i.id===n);if(V(!((t.shouldThrow??!0)&&!s),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),s!==void 0)return t.select?t.select(s):s}})}function re(t){return tt({...t,select:n=>typeof t.select=="function"?t.select(n.loaderDeps):n.loaderDeps})}function se(t){return tt({...t,select:n=>typeof t.select=="function"?t.select(n.loaderData):n.loaderData})}function ie(t){return tt({...t,select:n=>t.select?t.select(n.params):n.params})}function ae(t){return tt({...t,select:n=>t.select?t.select(n.search):n.search})}function ce(t){const{navigate:n}=et();return S.useCallback(e=>n({...e}),[n])}class le{constructor(n){this.init=e=>{var o,s;this.originalIndex=e.originalIndex;const i=this.options,r=!(i!=null&&i.path)&&!(i!=null&&i.id);this.parentRoute=(s=(o=this.options).getParentRoute)==null?void 0:s.call(o),r?this._path=q:V(this.parentRoute);let a=r?q:i.path;a&&a!=="/"&&(a=kt(a));const l=(i==null?void 0:i.id)||a;let c=r?q:Z([this.parentRoute.id===q?"":this.parentRoute.id,l]);a===q&&(a="/"),c!==q&&(c=Z(["/",c]));const d=c===q?"/":Z([this.parentRoute.fullPath,a]);this._path=a,this._id=c,this._fullPath=d,this._to=d,this._ssr=(i==null?void 0:i.ssr)??e.defaultSsr??!0},this.updateLoader=e=>(Object.assign(this.options,e),this),this.update=e=>(Object.assign(this.options,e),this),this.lazy=e=>(this.lazyFn=e,this),this.useMatch=e=>tt({...e,from:this.id}),this.useRouteContext=e=>tt({...e,from:this.id,select:o=>e!=null&&e.select?e.select(o.context):o.context}),this.useSearch=e=>ae({...e,from:this.id}),this.useParams=e=>ie({...e,from:this.id}),this.useLoaderDeps=e=>re({...e,from:this.id}),this.useLoaderData=e=>se({...e,from:this.id}),this.useNavigate=()=>ce({from:this.id}),this.options=n||{},this.isRoot=!(n!=null&&n.getParentRoute),V(!(n!=null&&n.id&&(n!=null&&n.path))),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(n){return this._addFileChildren(n)}_addFileChildren(n){return Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this}}function Po(t){return new le(t)}class bo extends le{constructor(n){super(n)}addChildren(n){return super.addChildren(n),this}_addFileChildren(n){return super._addFileChildren(n),this}_addFileTypes(){return this}}function Do(t){return new bo(t)}function Ao(t){return new Ro(t,{silent:!0}).createRoute}class Ro{constructor(n,e){this.path=n,this.createRoute=o=>{this.silent;const s=Po(o);return s.isRoot=!1,s},this.silent=e==null?void 0:e.silent}}class Lo{constructor(n){this.useMatch=e=>tt({select:e==null?void 0:e.select,from:this.options.id}),this.useRouteContext=e=>tt({from:this.options.id,select:o=>e!=null&&e.select?e.select(o.context):o.context}),this.useSearch=e=>ae({...e,from:this.options.id}),this.useParams=e=>ie({...e,from:this.options.id}),this.useLoaderDeps=e=>re({...e,from:this.options.id}),this.useLoaderData=e=>se({...e,from:this.options.id}),this.useNavigate=()=>ce({from:this.options.id}),this.options=n,this.$$typeof=Symbol.for("react.memo")}}const xo=/\(.+\)/g;function wo(t){return t.replaceAll(xo,"").replaceAll("//","/")}function No(t){return n=>new Lo({id:wo(t),...n})}function _t(t){return g.jsx(g.Fragment,{children:t.children})}function ue(t,n,e){return n.options.notFoundComponent?g.jsx(n.options.notFoundComponent,{data:e}):t.options.defaultNotFoundComponent?g.jsx(t.options.defaultNotFoundComponent,{data:e}):g.jsx(fo,{})}const de=S.memo(function({matchId:n}){var e,o;const s=et(),i=U({select:f=>{var b;return(b=f.matches.find(C=>C.id===n))==null?void 0:b.routeId}});V(i);const r=s.routesById[i],a=r.options.pendingComponent??s.options.defaultPendingComponent,l=a?g.jsx(a,{}):null,c=r.options.errorComponent??s.options.defaultErrorComponent,d=r.options.onCatch??s.options.defaultOnCatch,u=r.isRoot?r.options.notFoundComponent??((e=s.options.notFoundRoute)==null?void 0:e.options.component):r.options.notFoundComponent,h=(!r.isRoot||r.options.wrapInSuspense)&&(r.options.wrapInSuspense??a??((o=r.options.errorComponent)==null?void 0:o.preload))?S.Suspense:_t,p=c?Ot:_t,m=u?ho:_t,v=U({select:f=>f.loadedAt});return g.jsx(Ct.Provider,{value:n,children:g.jsx(h,{fallback:l,children:g.jsx(p,{getResetKey:()=>v,errorComponent:c||wt,onCatch:(f,b)=>{if(Y(f))throw f;d==null||d(f,b)},children:g.jsx(m,{fallback:f=>{if(!u||f.routeId&&f.routeId!==i||!f.routeId&&!r.isRoot)throw f;return S.createElement(u,f)},children:g.jsx(Co,{matchId:n})})})})})}),Co=S.memo(function({matchId:n}){var e,o,s;const i=et(),{match:r,matchIndex:a,routeId:l}=U({select:h=>{const p=h.matches.findIndex(f=>f.id===n),m=h.matches[p];return{routeId:m.routeId,matchIndex:p,match:pt(m,["id","status","error","loadPromise"])}}}),c=i.routesById[l],d=S.useMemo(()=>{const h=c.options.component??i.options.defaultComponent;return h?g.jsx(h,{}):g.jsx(Mo,{})},[c.options.component,i.options.defaultComponent]),u=(c.options.errorComponent??i.options.defaultErrorComponent)||wt;if(r.status==="notFound"){let h;return Ht(r.error)?h=(((e=i.options.errorSerializer)==null?void 0:e.deserialize)??Wt)(r.error.data):h=r.error,V(Y(h)),ue(i,c,h)}if(r.status==="redirected")throw V(nt(r.error)),r.loadPromise;if(r.status==="error"){if(i.isServer)return g.jsx(u,{error:r.error,info:{componentStack:""}});throw Ht(r.error)?(((o=i.options.errorSerializer)==null?void 0:o.deserialize)??Wt)(r.error.data):r.error}if(r.status==="pending"){const h=c.options.pendingMinMs??i.options.defaultPendingMinMs;if(h&&!((s=i.getMatch(r.id))!=null&&s.minPendingPromise)&&!i.isServer){const p=at();Promise.resolve().then(()=>{i.updateMatch(r.id,m=>({...m,minPendingPromise:p}))}),setTimeout(()=>{p.resolve(),i.updateMatch(r.id,m=>({...m,minPendingPromise:void 0}))},h)}throw r.loadPromise}return g.jsxs(g.Fragment,{children:[d,i.AfterEachMatch?g.jsx(i.AfterEachMatch,{match:r,matchIndex:a}):null]})}),Mo=S.memo(function(){const n=et(),e=S.useContext(Ct),o=U({select:c=>{var d;return(d=c.matches.find(u=>u.id===e))==null?void 0:d.routeId}}),s=n.routesById[o],{parentGlobalNotFound:i}=U({select:c=>{const u=c.matches.find(h=>h.id===e);return V(u),{parentGlobalNotFound:u.globalNotFound}}}),r=U({select:c=>{var d;const u=c.matches,h=u.findIndex(p=>p.id===e);return(d=u[h+1])==null?void 0:d.id}});if(i)return ue(n,s,void 0);if(!r)return null;const a=g.jsx(de,{matchId:r}),l=n.options.defaultPendingComponent?g.jsx(n.options.defaultPendingComponent,{}):null;return e===q?g.jsx(S.Suspense,{fallback:l,children:a}):a}),Eo="Error preloading route! ☝️";function Io(t,n){const e=et(),[o,s]=S.useState(!1),i=so(n),{activeProps:r=()=>({className:"active"}),inactiveProps:a=()=>({}),activeOptions:l,hash:c,search:d,params:u,to:h,state:p,mask:m,preload:v,preloadDelay:f,replace:b,startTransition:C,resetScroll:_,viewTransition:L,children:B,target:T,disabled:w,style:E,className:P,onClick:O,onFocus:I,onMouseEnter:F,onMouseLeave:A,onTouchStart:N,ignoreBlocker:x,...k}=t,H=S.useMemo(()=>{try{return new URL(`${h}`),"external"}catch{}return"internal"},[h]),y=S.useMemo(()=>e.buildLocation(t),[e,t]),Q=S.useMemo(()=>v??e.options.defaultPreload,[e.options.defaultPreload,v]),z=f??e.options.defaultPreloadDelay??0,j=U({select:M=>{const $=Pt(M.location.pathname,e.basepath).split("/"),Et=Pt(y.pathname,e.basepath).split("/").every((me,ve)=>me===$[ve]),he=l!=null&&l.exact?ao(M.location.pathname,y.pathname,e.basepath):Et,fe=l!=null&&l.includeHash?M.location.hash===y.hash:!0,pe=(l==null?void 0:l.includeSearch)??!0?lt(M.location.search,y.search,!(l!=null&&l.exact)):!0;return he&&fe&&pe}}),R=S.useCallback(()=>{e.preloadRoute(t).catch(M=>{console.warn(M),console.warn(Eo)})},[t,e]),D=S.useCallback(M=>{M!=null&&M.isIntersecting&&R()},[R]);if(ro(i,D,{rootMargin:"100px"},{disabled:!!w||Q!=="viewport"}),H==="external")return{...k,ref:i,type:H,href:h,...B&&{children:B},...T&&{target:T},...w&&{disabled:w},...E&&{style:E},...P&&{className:P},...O&&{onClick:O},...I&&{onFocus:I},...F&&{onMouseEnter:F},...A&&{onMouseLeave:A},...N&&{onTouchStart:N}};const G=M=>{if(!w&&!Fo(M)&&!M.defaultPrevented&&(!T||T==="_self")&&M.button===0){M.preventDefault(),ge.flushSync(()=>{s(!0)});const $=e.subscribe("onResolved",()=>{$(),s(!1)});e.commitLocation({...y,replace:b,resetScroll:_,startTransition:C,viewTransition:L,ignoreBlocker:x})}},ot=M=>{w||Q&&R()},mt=ot,vt=M=>{if(w)return;const $=M.target||{};if(Q){if($.preloadTimeout)return;$.preloadTimeout=setTimeout(()=>{$.preloadTimeout=null,R()},z)}},st=M=>{if(w)return;const $=M.target||{};$.preloadTimeout&&(clearTimeout($.preloadTimeout),$.preloadTimeout=null)},K=M=>$=>{var Mt;(Mt=$.persist)==null||Mt.call($),M.filter(Boolean).forEach(Et=>{$.defaultPrevented||Et($)})},W=j?ct(r,{})??{}:{},J=j?{}:ct(a,{}),gt=[P,W.className,J.className].filter(Boolean).join(" "),X={...E,...W.style,...J.style};return{...k,...W,...J,href:w?void 0:y.maskedLocation?e.history.createHref(y.maskedLocation.href):e.history.createHref(y.href),ref:i,onClick:K([O,G]),onFocus:K([I,ot]),onMouseEnter:K([F,vt]),onMouseLeave:K([A,st]),onTouchStart:K([N,mt]),disabled:!!w,target:T,...Object.keys(X).length&&{style:X},...gt&&{className:gt},...w&&{role:"link","aria-disabled":!0},...j&&{"data-status":"active","aria-current":"page"},...o&&{"data-transitioning":"transitioning"}}}const zo=S.forwardRef((t,n)=>{const{_asChild:e,...o}=t,{type:s,ref:i,...r}=Io(o,n),a=typeof o.children=="function"?o.children({isActive:r["data-status"]==="active"}):o.children;return typeof e>"u"&&delete r.disabled,S.createElement(e||"a",{...r,ref:i},a)});function Fo(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function To(){const t=et(),n=S.useRef({router:t,mounted:!1}),e=U({select:c=>pt(c,["isLoading","location","resolvedLocation","isTransitioning"])}),[o,s]=S.useTransition(),i=U({select:c=>c.matches.some(d=>d.status==="pending")}),r=Kt(e.isLoading),a=e.isLoading||o||i,l=Kt(a);return t.isServer||(t.startReactTransition=s),S.useEffect(()=>{const c=t.history.subscribe(t.load),d=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0});return rt(t.latestLocation.href)!==rt(d.href)&&t.commitLocation({...d,replace:!0}),()=>{c()}},[t,t.history]),Tt(()=>{var c;if(typeof window<"u"&&((c=window.__TSR__)!=null&&c.dehydrated)||n.current.router===t&&n.current.mounted)return;n.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(u){console.error(u)}})()},[t]),Tt(()=>{if(r&&!e.isLoading){const c=t.state.location,d=t.state.resolvedLocation,u=d.href!==c.href;t.emit({type:"onLoad",fromLocation:d,toLocation:c,pathChanged:u})}},[r,t,e.isLoading]),Tt(()=>{if(l&&!a){const c=t.state.location,d=t.state.resolvedLocation,u=d.href!==c.href;if(t.emit({type:"onResolved",fromLocation:d,toLocation:c,pathChanged:u}),t.__store.setState(h=>({...h,status:"idle",resolvedLocation:h.location})),typeof document<"u"&&document.querySelector&&t.state.location.hash!==""){const h=document.getElementById(t.state.location.hash);h&&h.scrollIntoView()}}},[a,l,t]),null}function jo(){const t=et(),n=t.options.defaultPendingComponent?g.jsx(t.options.defaultPendingComponent,{}):null,e=t.isServer||typeof document<"u"&&window.__TSR__?_t:S.Suspense,o=g.jsxs(e,{fallback:n,children:[g.jsx(To,{}),g.jsx(ko,{})]});return t.options.InnerWrap?g.jsx(t.options.InnerWrap,{children:o}):o}function ko(){const t=U({select:e=>{var o;return(o=e.matches[0])==null?void 0:o.id}}),n=U({select:e=>e.loadedAt});return g.jsx(Ct.Provider,{value:t,children:g.jsx(Ot,{getResetKey:()=>n,errorComponent:wt,onCatch:e=>{e.message||e.toString()},children:t?g.jsx(de,{matchId:t}):null})})}function Oo({router:t,children:n,...e}){t.update({...t.options,...e,context:{...t.options.context,...e.context}});const o=Qt(),s=g.jsx(o.Provider,{value:t,children:n});return t.options.Wrap?g.jsx(t.options.Wrap,{children:s}):s}function Ko({router:t,...n}){return g.jsx(Oo,{router:t,...n,children:g.jsx(jo,{})})}function Vo(t){return U({select:n=>n.location})}export{zo as L,Mo as O,Ko as R,Ao as a,Bo as b,Do as c,No as d,g as j,Vo as u};
